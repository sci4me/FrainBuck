function truthy(r, a)
	assert(allocated(r))
	assert(allocated(a))

	to(r)
	clear()
	to(a)	
	open()
		to(r)
		inc()
		to(a)
		clear()
	close()
	to(r)
end

function bor(r, a, b)
	assert(allocated(r))
	assert(allocated(a))
	assert(allocated(b))

	to(r)
	clear()
	to(a)
	open()
		to(b)
		inc()
		to(a)
		clear()
	close()
	truthy(r, b)
end

function band(r, a, b)
	assert(allocated(r))
	assert(allocated(a))
	assert(allocated(b))

	to(r)
	clear()
	to(a)
	open()
		to(b)
		open()
			to(r)
			inc()
			to(b)
			clear()
		close()
		to(a)
		clear()
	close()
	to(r)
end

function bnot(a)
	assert(allocated(a))

	local tmp = alloc()

	to(a)
	open()
		to(tmp)
		inc()
		to(a)
		clear()
	close()
	inc()
	to(tmp)
	open()
		to(a)
		dec()
		to(tmp)
		dec()
	close()
	free(tmp)
	to(a)
end